!function(){"use strict";class e{constructor(e,t,s){let{name:n,link:o}=e;this._name=n,this._link=o,this._cardSelector=t,this._handeImageClick=s}_setEventListeners(){this._likeButton.addEventListener("click",(()=>{this._handleLikeBtn()})),this._deleteButton.addEventListener("click",(()=>{this._handleDeleteBtn()})),this._cardImageElement.addEventListener("click",(()=>{this._handeImageClick(this._name,this._link)}))}_handleLikeBtn(){this._likeButton.classList.toggle("card__like-button_active")}_handleDeleteBtn(){this._cardElement.remove(),this._cardElement=null}_getTemplate(){return this._cardElement=document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0),this._cardElement}generateCard(){this._cardElement=this._getTemplate(),this._cardImageElement=this._cardElement.querySelector(".card__image"),this._likeButton=this._cardElement.querySelector(".card__like-button"),this._deleteButton=this._cardElement.querySelector(".card__trash-button");const e=this._cardElement.querySelector(".card__title");return this._cardImageElement.src=this._link,this._cardImageElement.alt=this._name,e.textContent=this._name,this._setEventListeners(),this._cardElement}}class t{constructor(e,t){this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._formEl=t,this._submitButton=this._formEl.querySelector(this._submitButtonSelector),this._inputElements=[...this._formEl.querySelectorAll(this._inputSelector)]}showErrorMessage(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.add(this._inputErrorClass),t.textContent=e.validationMessage,t.classList.add(this._errorClass)}hideErrorMessage(e){const t=this._formEl.querySelector(`#${e.id}-error`);e.classList.remove(this._inputErrorClass),t.textContent="",t.classList.remove(this._errorClass)}checkInputValidity(e){e.validity.valid?this.hideErrorMessage(e):this.showErrorMessage(e)}toggleButtonState(){this._inputElements.every((e=>e.validity.valid&&""!==e.value))?(this._submitButton.classList.remove(this._inactiveButtonClass),this._submitButton.disabled=!1):this.disableSubmitButton()}disableSubmitButton(){this._submitButton.classList.add(this._inactiveButtonClass),this._submitButton.disabled=!0}setEventListeners(){this._inputElements.forEach((e=>{e.addEventListener("input",(()=>{this.checkInputValidity(e),this.toggleButtonState()}))})),this.toggleButtonState()}enableValidation(){this._formEl.addEventListener("submit",(e=>{e.preventDefault(),console.log("Form submitted."),this.disableSubmitButton()})),this.setEventListeners()}}class s{constructor(e){let{popupSelector:t}=e;this._popupElement=document.querySelector(t),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popupElement.classList.add("modal_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popupElement.classList.remove("modal_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}setEventListeners(){this._popupElement.querySelector(".modal__close-button").addEventListener("click",(()=>this.close())),this._popupElement.addEventListener("mousedown",(e=>{e.target===this._popupElement&&this.close()}))}}class n extends s{constructor(e,t){super(e),this._popupElement=document.querySelector(e),this._handleFormSubmit=t,this._formPopup=this._popupElement.querySelector(".modal__form"),this._inputList=this._formPopup.querySelectorAll(".modal__input")}_getInputValues(){return this._formValues={},this._inputList.forEach((e=>{this._formValues[e.name]=e.value})),this._formValues}setEventListeners(){this._formPopup.addEventListener("submit",(e=>{e.preventDefault(),this._handleFormSubmit(this._getInputValues()),this.close()})),super.setEventListeners()}setInputValues(e){this._inputList.forEach((t=>{t.value=e[t.name]}))}formReset(){this._formPopup.reset()}getForm(){return this._formPopup}}const o={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__button",inactiveButtonClass:"modal__button_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error_visible"},r=document.querySelector("#modal-edit"),i=document.querySelector("#modal-add"),l=document.querySelector(".profile__add-button"),a=(document.querySelectorAll(".modal__close-button"),document.querySelector(".profile")),c=(a.querySelector(".profile__title"),a.querySelector(".profile__subtitle"),r.querySelector("#name")),u=r.querySelector("#subtitle"),m=(r.querySelector("#modal-form-edit"),i.querySelector("#modal-form-add")),d=(m.querySelector("#add-title"),m.querySelector("#image-url"),document.querySelector(".cards__list"),document.querySelector(".profile__edit-button")),_=document.querySelector(".profile__add-button"),h=new class{constructor(e){let{nameSelector:t,jobSelector:s}=e;this._nameElement=document.querySelector(t),this._jobElement=document.querySelector(s)}getUserInfo(){return{name:this._nameElement.textContent,job:this._jobElement.textContent}}setUserInfo(e){let{name:t,job:s}=e;this._nameElement.textContent=t,this._jobElement.textContent=s}}({nameSelector:".profile__title",jobSelector:".profile__subtitle"}),p=new n("#modal-edit",(function(e){h.setUserInfo({name:e.name,job:e.subtitle})}));p.setEventListeners();const E=new n("#modal-add",(function(e){g({name:e.title,link:e.url}),E.close(),E.formReset()}));E.setEventListeners();const S=new class extends s{constructor(e){super(e),this._popupElement=document.querySelector(e),this._imageElement=this._popupElement.querySelector(".modal__image-preview"),this._captionElement=this._popupElement.querySelector(".modal__title-preview")}open(e){this._imageElement.src=e.link,this._imageElement.alt=e.name,this._captionElement.textContent=e.name,super.open()}}("#modal-image");S.setEventListeners(),l.addEventListener("click",(()=>{E.open()}));const b=new class{constructor(e,t){let{items:s,renderer:n}=e;this._items=s,this._renderer=n,this._container=document.querySelector(t)}renderItems(){this._items.forEach((e=>{this._renderer(e)}))}addItem(e){this._container.prepend(e)}}({items:[{name:"Lago di Braies",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lago.jpg"},{name:"Vanoise National Park",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/vanoise.jpg"},{name:"Latemar",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/latemar.jpg"},{name:"Bald Mountains",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/bald-mountains.jpg"},{name:"Lake Louise",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/lake-louise.jpg"},{name:"Yosemite Valley",link:"https://practicum-content.s3.us-west-1.amazonaws.com/software-engineer/around-project/yosemite.jpg"}],renderer:g},".cards__list");function g(t){const s=new e(t,"#card-template",((e,t)=>{S.open({name:e,link:t})})).generateCard();b.addItem(s)}b.renderItems(),d.addEventListener("click",(()=>{const e=h.getUserInfo();c.value=e.name,u.value=e.job,p.open()}));const v=document.querySelectorAll(".modal__form"),f={};v.forEach((e=>{const s=new t(o,e),n=e.getAttribute("name");f[n]=s,s.enableValidation()})),_.addEventListener("click",(()=>{E.open()}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFNLGtCQUNOQyxLQUFNLHVHQ2dFTjZILFNBQVVWLEdBRVosZ0JBS0YsU0FBU0EsRUFBVzNCLEdBQ2xCLE1BQU04QyxFQWlCTyxJQUFJNUksRUFqQmM4RixFQWlCQyxrQkFBa0IsQ0FBQ3pGLEVBQU1DLEtBQ3ZEc0gsRUFBVy9DLEtBQUssQ0FBRXhFLE9BQU1DLFFBQU8sSUFFckJzQixlQW5CWm9HLEVBQVlTLFFBQVFHLEVBQ3RCLENBTEFaLEVBQVlPLGNBNEJaN0IsRUFBa0I1RixpQkFBaUIsU0FBUyxLQUMxQyxNQUFNK0gsRUFBV2pDLEVBQVNLLGNBRTFCVixFQUFVekMsTUFBUStFLEVBQVN4SSxLQUMzQm1HLEVBQWMxQyxNQUFRK0UsRUFBUzNCLElBRS9CRyxFQUFpQnhDLE1BQU0sSUFHekIsTUFBTWlFLEVBQWV0SCxTQUFTeUIsaUJBQWlCLGdCQUN6QzhGLEVBQWlCLENBQUMsRUFFeEJELEVBQWE1RSxTQUFTL0IsSUFDcEIsTUFBTTZHLEVBQWdCLElBQUkvRyxFQUFjQyxFQUFRQyxHQUMxQzhHLEVBQVc5RyxFQUFPK0csYUFBYSxRQUNyQ0gsRUFBZUUsR0FBWUQsRUFDM0JBLEVBQWM3RSxrQkFBa0IsSUFJbEN3QyxFQUFjN0YsaUJBQWlCLFNBQVMsS0FDdEN5RyxFQUFhMUMsTUFBTSxHIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0NhcmQuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhGb3JtLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvdXRpbHMvQ29uc3RhbnRzLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvcGFnZXMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvc2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWUsIGxpbmsgfSwgY2FyZFNlbGVjdG9yLCBoYW5kbGVJbWFnZUNsaWNrKSB7XHJcbiAgICB0aGlzLl9uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xyXG4gICAgdGhpcy5fY2FyZFNlbGVjdG9yID0gY2FyZFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljaztcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlTGlrZUJ0bigpO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLl9kZWxldGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgICAgdGhpcy5faGFuZGxlRGVsZXRlQnRuKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgICAgIHRoaXMuX2hhbmRlSW1hZ2VDbGljayh0aGlzLl9uYW1lLCB0aGlzLl9saW5rKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUxpa2VCdG4oKSB7XHJcbiAgICB0aGlzLl9saWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ1dHRvbl9hY3RpdmVcIik7XHJcbiAgfVxyXG5cclxuICBfaGFuZGxlRGVsZXRlQnRuKCkge1xyXG4gICAgdGhpcy5fY2FyZEVsZW1lbnQucmVtb3ZlKCk7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7XHJcbiAgfVxyXG5cclxuICBfZ2V0VGVtcGxhdGUoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IGRvY3VtZW50XHJcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcclxuICAgICAgLmNvbnRlbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpXHJcbiAgICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICByZXR1cm4gdGhpcy5fY2FyZEVsZW1lbnQ7XHJcbiAgfVxyXG5cclxuICBnZW5lcmF0ZUNhcmQoKSB7XHJcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XHJcbiAgICB0aGlzLl9jYXJkSW1hZ2VFbGVtZW50ID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19pbWFnZVwiKTtcclxuICAgIHRoaXMuX2xpa2VCdXR0b24gPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2xpa2UtYnV0dG9uXCIpO1xyXG4gICAgdGhpcy5fZGVsZXRlQnV0dG9uID0gdGhpcy5fY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX190cmFzaC1idXR0b25cIik7XHJcbiAgICBjb25zdCBjYXJkVGl0bGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpO1xyXG5cclxuICAgIC8vIFNldCB0aGUgaW1hZ2Ugc291cmNlIGFuZCB0aXRsZVxyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5zcmMgPSB0aGlzLl9saW5rO1xyXG4gICAgdGhpcy5fY2FyZEltYWdlRWxlbWVudC5hbHQgPSB0aGlzLl9uYW1lO1xyXG4gICAgY2FyZFRpdGxlLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcclxuXHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIC8vIFJldHVybiB0aGUgcG9wdWxhdGVkIGNhcmQgZWxlbWVudFxyXG4gICAgcmV0dXJuIHRoaXMuX2NhcmRFbGVtZW50O1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcclxuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm1FbCkge1xyXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGNvbmZpZy5pbnB1dFNlbGVjdG9yO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IgPSBjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gY29uZmlnLmluYWN0aXZlQnV0dG9uQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG5cclxuICAgIHRoaXMuX2Zvcm1FbCA9IGZvcm1FbDtcclxuXHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b24gPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzID0gW1xyXG4gICAgICAuLi50aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSxcclxuICAgIF07XHJcbiAgfVxyXG5cclxuICBzaG93RXJyb3JNZXNzYWdlKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpOyAvLyBBZGQgZXJyb3Igc3R5bGluZ1xyXG4gICAgZXJyb3JFbC50ZXh0Q29udGVudCA9IGlucHV0RWwudmFsaWRhdGlvbk1lc3NhZ2U7IC8vIERpc3BsYXkgdGhlIG1lc3NhZ2VcclxuICAgIGVycm9yRWwuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTsgLy8gTWFrZSB0aGUgbWVzc2FnZSB2aXNpYmxlXHJcbiAgfVxyXG5cclxuICBoaWRlRXJyb3JNZXNzYWdlKGlucHV0RWwpIHtcclxuICAgIGNvbnN0IGVycm9yRWwgPSB0aGlzLl9mb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICAgIGlucHV0RWwuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpOyAvLyBSZW1vdmUgZXJyb3Igc3R5bGluZ1xyXG4gICAgZXJyb3JFbC50ZXh0Q29udGVudCA9IFwiXCI7IC8vIENsZWFyIHRoZSBtZXNzYWdlXHJcbiAgICBlcnJvckVsLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7IC8vIEhpZGUgdGhlIG1lc3NhZ2VcclxuICB9XHJcblxyXG4gIGNoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsKSB7XHJcbiAgICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgICAgdGhpcy5zaG93RXJyb3JNZXNzYWdlKGlucHV0RWwpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5oaWRlRXJyb3JNZXNzYWdlKGlucHV0RWwpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XHJcbiAgICBjb25zdCBpc0Zvcm1WYWxpZCA9IHRoaXMuX2lucHV0RWxlbWVudHMuZXZlcnkoXHJcbiAgICAgIChpbnB1dEVsKSA9PiBpbnB1dEVsLnZhbGlkaXR5LnZhbGlkICYmIGlucHV0RWwudmFsdWUgIT09IFwiXCJcclxuICAgICk7XHJcblxyXG4gICAgaWYgKGlzRm9ybVZhbGlkKSB7XHJcbiAgICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgICB0aGlzLl9zdWJtaXRCdXR0b24uZGlzYWJsZWQgPSBmYWxzZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuZGlzYWJsZVN1Ym1pdEJ1dHRvbigpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZGlzYWJsZVN1Ym1pdEJ1dHRvbigpIHtcclxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvbi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpO1xyXG4gICAgdGhpcy5fc3VibWl0QnV0dG9uLmRpc2FibGVkID0gdHJ1ZTtcclxuICB9XHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dEVsZW1lbnRzLmZvckVhY2goKGlucHV0RWwpID0+IHtcclxuICAgICAgaW5wdXRFbC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWwpO1xyXG4gICAgICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgICAgfSk7XHJcbiAgICB9KTtcclxuICAgIC8vIEluaXRpYWwgY2hlY2sgdG8gdXBkYXRlIHRoZSBidXR0b24gc3RhdGUgd2hlbiB0aGUgZm9ybSBpcyBsb2FkZWRcclxuICAgIHRoaXMudG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICB9XHJcblxyXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XHJcbiAgICB0aGlzLl9mb3JtRWwuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZSkgPT4ge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKFwiRm9ybSBzdWJtaXR0ZWQuXCIpO1xyXG4gICAgICB0aGlzLmRpc2FibGVTdWJtaXRCdXR0b24oKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRoaXMuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICB9XHJcbn1cclxuXHJcbi8vIGNvbnN0IGZvcm1FbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fZm9ybVwiKTtcclxuLy8gY29uc3QgY29uZmlnID0ge1xyXG4vLyAgIGZvcm1TZWxlY3RvcjogXCIubW9kYWxfX2Zvcm1cIixcclxuLy8gICBpbnB1dFNlbGVjdG9yOiBcIi5tb2RhbF9faW5wdXRcIixcclxuLy8gICBzdWJtaXRCdXR0b25TZWxlY3RvcjogXCIubW9kYWxfX2J1dHRvblwiLFxyXG4vLyAgIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX2J1dHRvbl9kaXNhYmxlZFwiLFxyXG4vLyAgIGlucHV0RXJyb3JDbGFzczogXCJtb2RhbF9faW5wdXRfdHlwZV9lcnJvclwiLFxyXG4vLyAgIGVycm9yQ2xhc3M6IFwibW9kYWxfX2Vycm9yX3Zpc2libGVcIixcclxuLy8gfTtcclxuXHJcbi8vIGZvcm1FbGVtZW50LmZvckVhY2goKGZvcm1FbCkgPT4ge1xyXG4vLyAgIGNvbnN0IGZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihjb25maWcsIGZvcm1FbCk7XHJcbi8vICAgZm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbi8vIH0pO1xyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IoeyBwb3B1cFNlbGVjdG9yIH0pIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKCkge1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50LmNsYXNzTGlzdC5hZGQoXCJtb2RhbF9vcGVuZWRcIik7XHJcbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XHJcbiAgfVxyXG5cclxuICBjbG9zZSgpIHtcclxuICAgIHRoaXMuX3BvcHVwRWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKFwibW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xyXG4gICAgaWYgKGV2dC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XHJcbiAgICBjb25zdCBjbG9zZUJ1dHRvbiA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCJcclxuICAgICk7XHJcblxyXG4gICAgY2xvc2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHRoaXMuY2xvc2UoKSk7XHJcblxyXG4gICAgLy9DbG9zZSB3aGVuIGNsaWNraW5nIG9uIHRoZSBvdmVybGF5XHJcbiAgICB0aGlzLl9wb3B1cEVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcIm1vdXNlZG93blwiLCAoZXZlbnQpID0+IHtcclxuICAgICAgaWYgKGV2ZW50LnRhcmdldCA9PT0gdGhpcy5fcG9wdXBFbGVtZW50KSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwLmpzXCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IsIGhhbmRsZUZvcm1TdWJtaXQpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTsgLy9pZiBJIHJlbW92ZSB0aGlzIHRoZSBjYXJkcyBkaXNhcHBlYXJcclxuICAgIHRoaXMuX2hhbmRsZUZvcm1TdWJtaXQgPSBoYW5kbGVGb3JtU3VibWl0O1xyXG4gICAgdGhpcy5fZm9ybVBvcHVwID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtUG9wdXAucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9faW5wdXRcIik7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9mb3JtVmFsdWVzID0ge307XHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcclxuICAgICAgdGhpcy5fZm9ybVZhbHVlc1tpbnB1dC5uYW1lXSA9IGlucHV0LnZhbHVlO1xyXG4gICAgfSk7XHJcbiAgICByZXR1cm4gdGhpcy5fZm9ybVZhbHVlcztcclxuICB9XHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fZm9ybVBvcHVwLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2dCkgPT4ge1xyXG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgdGhpcy5faGFuZGxlRm9ybVN1Ym1pdCh0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTtcclxuICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgfSk7XHJcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuXHJcbiAgc2V0SW5wdXRWYWx1ZXMoZGF0YSkge1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XHJcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZm9ybVJlc2V0KCkge1xyXG4gICAgdGhpcy5fZm9ybVBvcHVwLnJlc2V0KCk7XHJcbiAgfVxyXG5cclxuICBnZXRGb3JtKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Zvcm1Qb3B1cDtcclxuICB9XHJcbn1cclxuIiwiZXhwb3J0IGNvbnN0IGluaXRpYWxDYXJkcyA9IFtcclxuICB7XHJcbiAgICBuYW1lOiBcIkxhZ28gZGkgQnJhaWVzXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvbGFnby5qcGdcIixcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6IFwiVmFub2lzZSBOYXRpb25hbCBQYXJrXCIsXHJcbiAgICBsaW5rOiBcImh0dHBzOi8vcHJhY3RpY3VtLWNvbnRlbnQuczMudXMtd2VzdC0xLmFtYXpvbmF3cy5jb20vc29mdHdhcmUtZW5naW5lZXIvYXJvdW5kLXByb2plY3QvdmFub2lzZS5qcGdcIixcclxuICB9LFxyXG5cclxuICB7XHJcbiAgICBuYW1lOiBcIkxhdGVtYXJcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC9sYXRlbWFyLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJCYWxkIE1vdW50YWluc1wiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2JhbGQtbW91bnRhaW5zLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJMYWtlIExvdWlzZVwiLFxyXG4gICAgbGluazogXCJodHRwczovL3ByYWN0aWN1bS1jb250ZW50LnMzLnVzLXdlc3QtMS5hbWF6b25hd3MuY29tL3NvZnR3YXJlLWVuZ2luZWVyL2Fyb3VuZC1wcm9qZWN0L2xha2UtbG91aXNlLmpwZ1wiLFxyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogXCJZb3NlbWl0ZSBWYWxsZXlcIixcclxuICAgIGxpbms6IFwiaHR0cHM6Ly9wcmFjdGljdW0tY29udGVudC5zMy51cy13ZXN0LTEuYW1hem9uYXdzLmNvbS9zb2Z0d2FyZS1lbmdpbmVlci9hcm91bmQtcHJvamVjdC95b3NlbWl0ZS5qcGdcIixcclxuICB9LFxyXG5dO1xyXG5cclxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19idXR0b25cIixcclxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiBcIm1vZGFsX19idXR0b25fZGlzYWJsZWRcIixcclxuICBpbnB1dEVycm9yQ2xhc3M6IFwibW9kYWxfX2lucHV0X3R5cGVfZXJyb3JcIixcclxuICBlcnJvckNsYXNzOiBcIm1vZGFsX19lcnJvcl92aXNpYmxlXCIsXHJcbn07XHJcbiIsImltcG9ydCBDYXJkIGZyb20gXCIuLi9jb21wb25lbnRzL0NhcmQuanNcIjtcclxuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9zZWN0aW9uLmpzXCI7XHJcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcclxuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XHJcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xyXG5pbXBvcnQgeyBpbml0aWFsQ2FyZHMsIGNvbmZpZyB9IGZyb20gXCIuLi91dGlscy9Db25zdGFudHMuanNcIjtcclxuaW1wb3J0IFwiLi4vcGFnZXMvaW5kZXguY3NzXCI7XHJcblxyXG4vL3NwZWNpZmljZSBtb2RhbCBzZWxlY3RvclxyXG5jb25zdCBwcm9maWxlTW9kYWxFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1lZGl0XCIpO1xyXG5jb25zdCBwcm9maWxlTW9kYWxBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWFkZFwiKTtcclxuLy8gY29uc3QgcHJvZmlsZU1vZGFsSW1hZ2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWltYWdlXCIpO1xyXG5cclxuLy8gb3BlbiBidXR0b25zXHJcbi8vIGNvbnN0IGVkaXRCdG5DbGljayA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XHJcbmNvbnN0IGFkZE5ld0NhcmRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idXR0b25cIik7XHJcblxyXG4vLyBjbG9zZSBidXR0b25cclxuY29uc3QgY2xvc2VCdXR0b25zID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xyXG5cclxuLy90ZXh0IGluIHRoZSBlZGl0IGZvcm1cclxuY29uc3QgcHJvZmlsZVNlY3Rpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gcHJvZmlsZVNlY3Rpb24ucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX190aXRsZVwiKTtcclxuY29uc3QgcHJvZmlsZVN1YnRpdGxlID0gcHJvZmlsZVNlY3Rpb24ucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19zdWJ0aXRsZVwiKTtcclxuY29uc3QgaW5wdXROYW1lID0gcHJvZmlsZU1vZGFsRWRpdC5xdWVyeVNlbGVjdG9yKFwiI25hbWVcIik7XHJcbmNvbnN0IGlucHV0U3VidGl0bGUgPSBwcm9maWxlTW9kYWxFZGl0LnF1ZXJ5U2VsZWN0b3IoXCIjc3VidGl0bGVcIik7XHJcblxyXG4vLyBmb3JtXHJcbmNvbnN0IHByb2ZpbGVGb3JtU3VibWl0RWRpdCA9XHJcbiAgcHJvZmlsZU1vZGFsRWRpdC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsLWZvcm0tZWRpdFwiKTtcclxuY29uc3QgcHJvZmlsZUZvcm1TdWJtaXRBZGQgPSBwcm9maWxlTW9kYWxBZGQucXVlcnlTZWxlY3RvcihcIiNtb2RhbC1mb3JtLWFkZFwiKTtcclxuXHJcbi8vdGV4dCBkYXRhIGluIGFkZCBmb3JtXHJcbmNvbnN0IGlucHV0VGl0bGVBZGQgPSBwcm9maWxlRm9ybVN1Ym1pdEFkZC5xdWVyeVNlbGVjdG9yKFwiI2FkZC10aXRsZVwiKTtcclxuY29uc3QgaW5wdXRVcmxBZGQgPSBwcm9maWxlRm9ybVN1Ym1pdEFkZC5xdWVyeVNlbGVjdG9yKFwiI2ltYWdlLXVybFwiKTtcclxuXHJcbi8vdGV4dCBpbiBwcmV2aWV3IGltYWdlXHJcbi8vIGNvbnN0IGltYWdlUHJldmlldyA9IHByb2ZpbGVNb2RhbEltYWdlLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2ltYWdlLXByZXZpZXdcIik7XHJcbi8vIGNvbnN0IHRpdGxlUHJldmlldyA9IHByb2ZpbGVNb2RhbEltYWdlLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3RpdGxlLXByZXZpZXdcIik7XHJcblxyXG4vL2NhcmRzXHJcbmNvbnN0IGNhcmRMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuLy8gY29uc3QgdGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtdGVtcGxhdGVcIikuY29udGVudDtcclxuLy8gY29uc3QgY2FyZFRlbXBsYXRlID0gdGVtcGxhdGUucXVlcnlTZWxlY3RvcihcIi5jYXJkXCIpO1xyXG4vLyBjb25zdCBjYXJkVGVtcGxhdGVTZWxlY3RvciA9IFwiI2NhcmQtdGVtcGxhdGVcIjtcclxuXHJcbmNvbnN0IGVkaXRQcm9maWxlQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ1dHRvblwiKTtcclxuY29uc3QgYWRkQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcclxuLy8gY29uc3QgcHJvZmlsZUVkaXRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJtb2RhbC1mb3JtLWVkaXRcIl07XHJcbi8vIGNvbnN0IGFkZENhcmRGb3JtID0gZG9jdW1lbnQuZm9ybXNbXCJtb2RhbC1mb3JtLWFkZFwiXTtcclxuXHJcbi8vIC0tLS0tLS0tLS0gVXNlciBJbmZvIC0tLS0tLS0tLS1cclxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oe1xyXG4gIG5hbWVTZWxlY3RvcjogXCIucHJvZmlsZV9fdGl0bGVcIixcclxuICBqb2JTZWxlY3RvcjogXCIucHJvZmlsZV9fc3VidGl0bGVcIixcclxufSk7XHJcblxyXG4vLyAtLS0tLS0tLS0tIFBvcHVwcyAtLS0tLS0tLS0tXHJcbi8vIFByb2ZpbGUgRWRpdCBQb3B1cFxyXG5jb25zdCBwcm9maWxlRWRpdFBvcHVwID0gbmV3IFBvcHVwV2l0aEZvcm0oXCIjbW9kYWwtZWRpdFwiLCBoYW5kbGVGb3JtU3VibWl0RWRpdCk7XHJcbnByb2ZpbGVFZGl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vIFByb2ZpbGUgQWRkIFBvcHVwXHJcbmNvbnN0IGFkZENhcmRQb3B1cCA9IG5ldyBQb3B1cFdpdGhGb3JtKFwiI21vZGFsLWFkZFwiLCBoYW5kbGVGb3JtU3VibWl0QWRkKTtcclxuYWRkQ2FyZFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBJbWFnZSBQcmV2aWV3IFBvcHVwXHJcbmNvbnN0IGltYWdlUG9wdXAgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoXCIjbW9kYWwtaW1hZ2VcIik7XHJcbmltYWdlUG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuXHJcbi8vLS0tLS0tLS0tLS0tLS0tLS0tRXZlbnRMaXN0ZW5lcnMgb2YgZm9ybXMtLS0tLS0tLS0tLS0tLS0tLy9cclxuXHJcbmFkZE5ld0NhcmRCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBhZGRDYXJkUG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbi8vRURJVCBzdWJtaXQgZnVuY3Rpb25cclxuZnVuY3Rpb24gaGFuZGxlRm9ybVN1Ym1pdEVkaXQoZGF0YSkge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKHtcclxuICAgIG5hbWU6IGRhdGEubmFtZSxcclxuICAgIGpvYjogZGF0YS5zdWJ0aXRsZSxcclxuICB9KTtcclxufVxyXG5cclxuY29uc3QgY2FyZFNlY3Rpb24gPSBuZXcgU2VjdGlvbihcclxuICB7XHJcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLFxyXG4gICAgcmVuZGVyZXI6IHJlbmRlckNhcmQsXHJcbiAgfSxcclxuICBcIi5jYXJkc19fbGlzdFwiXHJcbik7XHJcblxyXG5jYXJkU2VjdGlvbi5yZW5kZXJJdGVtcygpOyAvLyBSZW5kZXIgaW5pdGlhbCBjYXJkc1xyXG5cclxuZnVuY3Rpb24gcmVuZGVyQ2FyZChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjcmVhdGVDYXJkKGRhdGEpO1xyXG4gIGNhcmRTZWN0aW9uLmFkZEl0ZW0oY2FyZEVsZW1lbnQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVGb3JtU3VibWl0QWRkKGlucHV0RGF0YSkge1xyXG4gIGNvbnN0IGNhcmREYXRhID0ge1xyXG4gICAgbmFtZTogaW5wdXREYXRhLnRpdGxlLFxyXG4gICAgbGluazogaW5wdXREYXRhLnVybCxcclxuICB9O1xyXG4gIHJlbmRlckNhcmQoY2FyZERhdGEpO1xyXG4gIGFkZENhcmRQb3B1cC5jbG9zZSgpO1xyXG4gIGFkZENhcmRQb3B1cC5mb3JtUmVzZXQoKTtcclxufVxyXG5cclxuLy8gLS0tLS0tLS0tLSBGdW5jdGlvbnMgLS0tLS0tLS0tLVxyXG4vLyBDcmVhdGUgQ2FyZCBGdW5jdGlvblxyXG5mdW5jdGlvbiBjcmVhdGVDYXJkKGNhcmREYXRhKSB7XHJcbiAgY29uc3QgY2FyZCA9IG5ldyBDYXJkKGNhcmREYXRhLCBcIiNjYXJkLXRlbXBsYXRlXCIsIChuYW1lLCBsaW5rKSA9PiB7XHJcbiAgICBpbWFnZVBvcHVwLm9wZW4oeyBuYW1lLCBsaW5rIH0pO1xyXG4gIH0pO1xyXG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xyXG59XHJcblxyXG4vLyAtLS0tLS0tLS0tIEV2ZW50IExpc3RlbmVycyAtLS0tLS0tLS0tXHJcbi8vIE9wZW4gUHJvZmlsZSBFZGl0IFBvcHVwXHJcbmVkaXRQcm9maWxlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY29uc3QgdXNlckRhdGEgPSB1c2VySW5mby5nZXRVc2VySW5mbygpO1xyXG5cclxuICBpbnB1dE5hbWUudmFsdWUgPSB1c2VyRGF0YS5uYW1lO1xyXG4gIGlucHV0U3VidGl0bGUudmFsdWUgPSB1c2VyRGF0YS5qb2I7XHJcblxyXG4gIHByb2ZpbGVFZGl0UG9wdXAub3BlbigpO1xyXG59KTtcclxuXHJcbmNvbnN0IGZvcm1FbGVtZW50cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmNvbnN0IGZvcm1WYWxpZGF0b3JzID0ge307XHJcblxyXG5mb3JtRWxlbWVudHMuZm9yRWFjaCgoZm9ybUVsKSA9PiB7XHJcbiAgY29uc3QgZm9ybVZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZywgZm9ybUVsKTtcclxuICBjb25zdCBmb3JtTmFtZSA9IGZvcm1FbC5nZXRBdHRyaWJ1dGUoXCJuYW1lXCIpO1xyXG4gIGZvcm1WYWxpZGF0b3JzW2Zvcm1OYW1lXSA9IGZvcm1WYWxpZGF0b3I7XHJcbiAgZm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XHJcbn0pO1xyXG5cclxuLy8gT3BlbiBQcm9maWxlIEFERCBQb3B1cFxyXG5hZGRDYXJkQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgYWRkQ2FyZFBvcHVwLm9wZW4oKTtcclxufSk7XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcih7IG5hbWVTZWxlY3Rvciwgam9iU2VsZWN0b3IgfSkge1xyXG4gICAgdGhpcy5fbmFtZUVsZW1lbnQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG5hbWVTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9qb2JFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihqb2JTZWxlY3Rvcik7XHJcbiAgfVxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iRWxlbWVudC50ZXh0Q29udGVudCxcclxuICAgIH07XHJcbiAgfVxyXG5cclxuICBzZXRVc2VySW5mbyh7IG5hbWUsIGpvYiB9KSB7XHJcbiAgICB0aGlzLl9uYW1lRWxlbWVudC50ZXh0Q29udGVudCA9IG5hbWU7IC8vIFVwZGF0ZXMgdGhlIG5hbWUgb24gdGhlIHBhZ2VcclxuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBqb2I7IC8vIFVwZGF0ZXMgdGhlIGpvYiBvbiB0aGUgcGFnZVxyXG4gIH1cclxufVxyXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xyXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fcG9wdXBFbGVtZW50ID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihwb3B1cFNlbGVjdG9yKTsgLy9pZiBJIHJlbW92ZSB0aGlzIHRoZSBjYXJkcyBkaXNhcHBlYXJcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudCA9IHRoaXMuX3BvcHVwRWxlbWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gICAgICBcIi5tb2RhbF9faW1hZ2UtcHJldmlld1wiXHJcbiAgICApO1xyXG5cclxuICAgIHRoaXMuX2NhcHRpb25FbGVtZW50ID0gdGhpcy5fcG9wdXBFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcbiAgICAgIFwiLm1vZGFsX190aXRsZS1wcmV2aWV3XCJcclxuICAgICk7XHJcbiAgfVxyXG5cclxuICBvcGVuKGNhcmREYXRhKSB7XHJcbiAgICB0aGlzLl9pbWFnZUVsZW1lbnQuc3JjID0gY2FyZERhdGEubGluaztcclxuICAgIHRoaXMuX2ltYWdlRWxlbWVudC5hbHQgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgdGhpcy5fY2FwdGlvbkVsZW1lbnQudGV4dENvbnRlbnQgPSBjYXJkRGF0YS5uYW1lO1xyXG4gICAgc3VwZXIub3BlbigpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcclxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBjb250YWluZXJTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgICB0aGlzLl9jb250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKGNvbnRhaW5lclNlbGVjdG9yKTtcclxuICB9XHJcblxyXG4gIHJlbmRlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn1cclxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwibmFtZSIsImxpbmsiLCJ0aGlzIiwiX25hbWUiLCJfbGluayIsIl9jYXJkU2VsZWN0b3IiLCJfaGFuZGVJbWFnZUNsaWNrIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX2xpa2VCdXR0b24iLCJhZGRFdmVudExpc3RlbmVyIiwiX2hhbmRsZUxpa2VCdG4iLCJfZGVsZXRlQnV0dG9uIiwiX2hhbmRsZURlbGV0ZUJ0biIsIl9jYXJkSW1hZ2VFbGVtZW50IiwiY2xhc3NMaXN0IiwidG9nZ2xlIiwiX2NhcmRFbGVtZW50IiwicmVtb3ZlIiwiX2dldFRlbXBsYXRlIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiY29udGVudCIsImNsb25lTm9kZSIsImdlbmVyYXRlQ2FyZCIsImNhcmRUaXRsZSIsInNyYyIsImFsdCIsInRleHRDb250ZW50IiwiRm9ybVZhbGlkYXRvciIsImNvbmZpZyIsImZvcm1FbCIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9mb3JtRWwiLCJfc3VibWl0QnV0dG9uIiwiX2lucHV0RWxlbWVudHMiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2hvd0Vycm9yTWVzc2FnZSIsImlucHV0RWwiLCJlcnJvckVsIiwiaWQiLCJhZGQiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImhpZGVFcnJvck1lc3NhZ2UiLCJjaGVja0lucHV0VmFsaWRpdHkiLCJ2YWxpZGl0eSIsInZhbGlkIiwidG9nZ2xlQnV0dG9uU3RhdGUiLCJldmVyeSIsInZhbHVlIiwiZGlzYWJsZWQiLCJkaXNhYmxlU3VibWl0QnV0dG9uIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImUiLCJwcmV2ZW50RGVmYXVsdCIsImNvbnNvbGUiLCJsb2ciLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXBFbGVtZW50IiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJldnQiLCJrZXkiLCJldmVudCIsInRhcmdldCIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVGb3JtU3VibWl0Iiwic3VwZXIiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIl9mb3JtUG9wdXAiLCJfaW5wdXRMaXN0IiwiX2dldElucHV0VmFsdWVzIiwiX2Zvcm1WYWx1ZXMiLCJpbnB1dCIsInNldElucHV0VmFsdWVzIiwiZGF0YSIsImZvcm1SZXNldCIsInJlc2V0IiwiZ2V0Rm9ybSIsImZvcm1TZWxlY3RvciIsInByb2ZpbGVNb2RhbEVkaXQiLCJwcm9maWxlTW9kYWxBZGQiLCJhZGROZXdDYXJkQnRuIiwicHJvZmlsZVNlY3Rpb24iLCJpbnB1dE5hbWUiLCJpbnB1dFN1YnRpdGxlIiwicHJvZmlsZUZvcm1TdWJtaXRBZGQiLCJlZGl0UHJvZmlsZUJ1dHRvbiIsImFkZENhcmRCdXR0b24iLCJ1c2VySW5mbyIsIm5hbWVTZWxlY3RvciIsImpvYlNlbGVjdG9yIiwiX25hbWVFbGVtZW50IiwiX2pvYkVsZW1lbnQiLCJnZXRVc2VySW5mbyIsImpvYiIsInNldFVzZXJJbmZvIiwiX3JlZjIiLCJwcm9maWxlRWRpdFBvcHVwIiwic3VidGl0bGUiLCJhZGRDYXJkUG9wdXAiLCJpbnB1dERhdGEiLCJyZW5kZXJDYXJkIiwidGl0bGUiLCJ1cmwiLCJpbWFnZVBvcHVwIiwiX2ltYWdlRWxlbWVudCIsIl9jYXB0aW9uRWxlbWVudCIsImNhcmREYXRhIiwiY2FyZFNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJfY29udGFpbmVyIiwicmVuZGVySXRlbXMiLCJpdGVtIiwiYWRkSXRlbSIsImVsZW1lbnQiLCJwcmVwZW5kIiwiY2FyZEVsZW1lbnQiLCJ1c2VyRGF0YSIsImZvcm1FbGVtZW50cyIsImZvcm1WYWxpZGF0b3JzIiwiZm9ybVZhbGlkYXRvciIsImZvcm1OYW1lIiwiZ2V0QXR0cmlidXRlIl0sInNvdXJjZVJvb3QiOiIifQ==